/* ==================================================
   Vivora Fashion Illustration 2025 — Fixed Layout
   ・アートボード 1280×820（固定）
   ・方眼紙は artboard 内だけ（.show-grid で表示）
   ・添付画像のレイアウトに合わせて絶対配置
================================================== */

/* ---- Tokens ---- */
:root{
  /* base colors */
  --bg:    #e9e4de;   /* ページ背景（薄ベージュ） */
  --panel: #ffffff;   /* パネル白 */
  --tile:  #f0eae3;   /* アートボード外周の淡ベージュ帯 */
  --line:  #d8d2cc;   /* 枠線 */
  --text:  #333;

  /* artboard */
  --art-w: 1280px;
  --art-h: 820px;
  --art-radius: 14px;

  /* rails and parts */
  --rail-gap: 12px;
  --rail-w-narrow: 48px;  /* export(上) の列幅 */
  --rail-w-wide:   96px;  /* panels/colors の列幅 */
  --tools-w:       60px;  /* tools 列の幅 */

  /* icons */
  --top-icon: 26px;  /* TopBar の小アイコン */
  --tool-icon:28px;  /* 縦ツールのアイコン */

  /* grid image（方眼紙） */
  --grid-img: url("/public/grid/W_4.51 mm・H_4.54 mm.png");
  --grid-opacity: .42;
  --grid-blend: multiply;
}

/* ---- Reset ---- */
* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Hiragino Sans", "Noto Sans JP", "Helvetica Neue", Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
}

/* ---- App Frame ---- */
.app{
  max-width: calc(var(--art-w) + 200px);
  margin: 20px auto 40px;
  padding: 0 24px;
}

/* ========= Top Bar ========= */
.topbar{
  display: grid;
  grid-template-columns: 1fr auto auto;
  align-items: center;
  gap: 16px;
  margin-bottom: 6px;
}
.title{
  margin: 0;
  font-size: 16px;
  font-weight: 500;
  letter-spacing: .15px;
}

.top-icons{
  display: grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 10px;
}
.ti{
  width: var(--top-icon);
  height: var(--top-icon);
  object-fit: contain;
  display: block;
  /* 画像が無い時も高さを保持するためのプレースホルダ背景 */
  background: linear-gradient(#f7f4f0,#ece7e1);
  border: 1px solid var(--line);
  border-radius: 6px;
  padding: 4px;
}

.nextstep{
  appearance: none;
  background: transparent;
  border: none;
  font-size: 13px;
  color: #333;
  padding: 6px 8px;
  cursor: pointer;
}

/* ========= Stage / Artboard ========= */
.stage{
  display: grid;
  justify-content: center;
}

/* アートボード本体（白板 + 外周帯） */
.artboard{
  position: relative;
  width: var(--art-w);
  height: var(--art-h);
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: var(--art-radius);
  box-shadow:
    inset 0 0 0 8px var(--tile),
    0 1px 0 rgba(0,0,0,.04),
    0 6px 20px rgba(0,0,0,.05);
  overflow: hidden;
}

/* 方眼紙は artboard 内だけ（必要に応じて .show-grid を付与） */
.artboard.show-grid::before{
  content: "";
  position: absolute; inset: 0;
  background-image: var(--grid-img);
  background-repeat: repeat;
  background-position: center;
  background-size: auto; /* 元ピッチ */
  opacity: var(--grid-opacity);
  mix-blend-mode: var(--grid-blend);
  pointer-events: none;
}

/* マネキン（中央） */
.mannequin{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  height: min(560px, 68%);
  opacity: .95;
  user-select: none;
  -webkit-user-drag: none;
  z-index: 1;
}

/* ========= 右レール群（添付画像通りの並び） ========= */
/* 共通のレール装飾 */
.rail{
  position: absolute;
  right: 10px;
  border-radius: 12px;
  background: linear-gradient(#f7f4f0,#f1ede7);
  border: 1px solid var(--line);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.55);
}

/* (1) エクスポート列（最右・上部に小さな3つ） */
.rail-export{
  top: 18px;
  width: var(--rail-w-narrow);
  padding: 10px 6px;
  display: grid;
  gap: 12px;
  align-items: center;
  justify-items: center;
  z-index: 3;
}
.ri{
  width: 20px; height: 20px; object-fit: contain; display: block;
}

/* (2) 縦ツール列（エクスポート列の左隣にピッタリ） */
.rail-tools{
  top: 56px; /* 添付の余白感に合わせて微調整 */
  right: calc(10px + var(--rail-w-narrow) + var(--rail-gap));
  width: var(--tools-w);
  height: calc(100% - 110px);
  padding: 12px 8px;
  display: grid;
  grid-auto-rows: min-content;
  gap: 10px;
}
.tool{
  width: var(--tool-icon);
  height: var(--tool-icon);
  object-fit: contain;
  display: block;
  margin: 0 auto;
}

/* (3) レイヤーパネル列（最右・中段あたりに3枠） */
.rail-panels{
  top: 76px;
  right: 10px;
  width: var(--rail-w-wide);
  height: calc(100% - 260px);
  padding: 12px 10px;
  display: grid;
  grid-template-rows: 1fr 1fr 1fr;
  gap: 16px;
  z-index: 2;
}
.panel{
  position: relative;
  background: #fff;
  border: 1px solid var(--line);
  border-radius: 10px;
  min-height: 122px; /* スクショの比率に合わせて微調整 */
  box-shadow: 0 1px 0 rgba(0,0,0,.03) inset;
}
.panel-icons{
  position: absolute;
  top: 6px; left: 6px;
  display: grid; grid-auto-flow: column; gap: 6px;
}
.panel-actions{
  position: absolute;
  bottom: 6px; right: 6px;
  display: grid; grid-auto-flow: column; gap: 6px;
}
.panel img{
  width: 16px; height: 16px; object-fit: contain; display: block;
}

/* (4) カラーパレット列（最右・下段） */
.rail-colors{
  bottom: 16px;
  right: 10px;
  width: var(--rail-w-wide);
  padding: 12px 10px;
  display: grid;
  gap: 8px;
  align-content: start;
  z-index: 2;
}
.swatch{
  --size: 22px;
  width: var(--size); height: var(--size);
  border-radius: 50%;
  border: 1px solid #cfc7bf;
  background: var(--c,#eee);
  appearance: none;
  display: block;
  cursor: pointer;
}
.swatch.settings{
  background: #fff; position: relative;
}
.swatch.settings::after{
  content: ""; position: absolute; inset: 6px;
  border-radius: 50%; border: 1px solid #cfc7bf;
}

/* ========= ズームチップ（右中央付近） ========= */
.zoom-indicator{
  position: absolute;
  right: 190px;   /* ツール列とパネル列の間のあたり */
  top: 318px;     /* 添付の位置感に合わせた固定 */
  display: grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 6px;
  z-index: 4;
}
.zoom-indicator span{
  font-size: 12px;
  background: #8b8b8b;
  color: #fff;
  padding: 4px 8px;
  border-radius: 6px;
}
.zoom-indicator i{
  width: 50px; height: 8px; border-radius: 4px;
  background: #b9b6b3; position: relative; display: inline-block;
}
.zoom-indicator i::after{
  content: ""; position: absolute; right: 6px; top: 2px;
  width: 6px; height: 6px; border-radius: 50%; background: #6ba9d6;
}

/* ---- 小さな保護 ---- */
@media (max-width: 1440px){
  .app{ padding: 0 16px; }
}
