/* ===== TOKENS ===== */
:root{
  --bg:#efe7e0;
  --panel:#ffffff;
  --tile:#ece7e1;
  --line:#e6e0db;
  --text:#333;

  --icon:26px;      /* history/contents tile icon size */
  --st:30px;        /* stationery small button */

  --radius:12px;
  --radius-sm:10px;

  --right-col:360px;
  --canvas-pad:26px;
  --gap:14px;       /* ややタイトに */

  --shadow:0 6px 18px rgba(0,0,0,.06);

  /* Cassette (左レール) */
  --cassette-col:220px;  /* 左カラム幅（必要に応じて調整） */
  --cassette-h:180px;    /* 1段の高さ */
  --cassette-pad:14px;
  --cassette-rail-w:48px;
  --cassette-bg:#c7c2bb;   /* 外枠 */
  --cassette-track:#eee7df;/* 右の縦帯 */
  --cassette-radius:24px;
}

/* ===== BASE ===== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text); background:#fff;
}
img{display:block;max-width:100%;height:auto}
button{font:inherit}

/* ===== TOPBAR ===== */
.vfi-topbar{padding:14px 16px;background:var(--bg);border-bottom:1px solid var(--line)}
.vfi-row{display:flex;align-items:center;gap:12px}
.vfi-row + .vfi-row{margin-top:10px}
.vfi-title{font-size:16px;font-weight:600}
.vfi-flex{flex:1}
.vfi-mode{display:flex;gap:8px}
.vfi-mode button{padding:6px 14px;border:1px solid var(--line);background:var(--tile);border-radius:10px}
.vfi-next{padding:8px 14px;border:1px solid var(--line);background:var(--panel);border-radius:12px}
.vfi-gender{display:flex;gap:8px}
.vfi-gender button{padding:6px 12px;border:1px solid var(--line);background:#fff;border-radius:8px}

.vfi-tiles{display:flex;gap:8px}
.vfi-tile{width:var(--icon);height:var(--icon);padding:6px;background:var(--tile);border:1px solid var(--line);border-radius:var(--radius-sm);object-fit:contain}

/* ===== MAIN ===== */
.vfi-main{
  display:grid; grid-template-columns:1fr var(--right-col);
  gap:22px; padding:18px 16px; background:var(--bg);
  min-height:calc(100vh - 78px);
}
.vfi-canvas{
  background:var(--panel); border:1px solid var(--line); border-radius:var(--radius);
  padding:var(--canvas-pad); display:flex; align-items:center; justify-content:center;
}
.vfi-mannequin{max-width:420px}

.vfi-right{display:flex;flex-direction:column;gap:var(--gap)}
.vfi-contents-row{display:flex;justify-content:flex-end}

/* ===== RIGHT GRID (Layers + Panels) ===== */
.vfi-rightgrid{
  display:grid;
  grid-template-columns: var(--cassette-col) 1fr;
  gap: var(--gap);
  align-items: start;
}

/* ---- Left: Cassette column ---- */
.vfi-rail{display:flex;flex-direction:column;gap:var(--gap)}

.vfi-cassette{
  position:relative;
  height:var(--cassette-h);
  background:var(--cassette-bg);
  border-radius:var(--cassette-radius);
}

.vfi-cassette__preview{
  position:absolute;
  top:var(--cassette-pad);
  bottom:var(--cassette-pad);
  left:var(--cassette-pad);
  right:calc(var(--cassette-rail-w) + var(--cassette-pad)*1.2);
  background:#fff;
  border:1px solid var(--line);
  border-radius:18px;
}
.vfi-cassette__inicons{
  position:absolute; top:12px; right:12px;
  display:flex; flex-direction:column; gap:12px;
}
.vfi-cassette__inicons img{width:24px;height:24px;object-fit:contain}

.vfi-cassette__rail{
  position:absolute;
  top:var(--cassette-pad); right:var(--cassette-pad); bottom:var(--cassette-pad);
  width:var(--cassette-rail-w);
  background:var(--cassette-track);
  border:1px solid var(--line);
  border-radius:22px;
  display:flex; flex-direction:column; align-items:center; justify-content:space-between;
  padding:10px 0;
}
.vfi-cassette__rail img{
  width:22px; height:22px; object-fit:contain;
  background:#fff; border:1px solid var(--line); border-radius:999px; padding:5px;
}

/* ---- Right: Panels ---- */
.vfi-panels{display:flex;flex-direction:column;gap:var(--gap)}

.vfi-panel{
  background:#fff; border:1px solid var(--line);
  border-radius:var(--radius); padding:14px 16px;
  display:flex; flex-direction:column; gap:12px;
}
.vfi-panel h3{
  font-size:18px; font-weight:700; letter-spacing:.2px; margin-bottom:6px;
}

.vfi-st-row{display:flex;gap:12px}
.vfi-st{width:var(--st);height:var(--st);padding:6px;border:1px solid var(--line);background:#fff;border-radius:10px;object-fit:contain}

.vfi-z-row{display:flex;align-items:center;gap:12px}
.vfi-ghost{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border:1px solid var(--line);border-radius:8px;background:#fff}
.vfi-bar{position:relative;flex:1;height:6px;border:1px solid var(--line);border-radius:999px;background:linear-gradient(90deg,#dcd6cf,#a8a19b)}
.vfi-bar i{position:absolute;top:-5px;left:20%;width:14px;height:14px;background:#fff;border:1px solid var(--line);border-radius:50%}
.vfi-ghostbtn{padding:6px 10px;border:1px solid var(--line);background:#fff;border-radius:8px}
.vfi-note{font-size:12px;color:#777}

.vfi-swatches{display:grid;grid-template-columns:repeat(5,28px);gap:10px}
.vfi-swatches div{width:28px;height:28px;border-radius:8px;border:1px solid var(--line)}
.vfi-color-actions{display:flex;gap:8px}

/* ===== Responsive ===== */
@media (max-width:1024px){
  .vfi-main{grid-template-columns:1fr}
  .vfi-contents-row{justify-content:flex-start}
  .vfi-rightgrid{grid-template-columns:1fr}
  .vfi-rail{order:1}
  .vfi-panels{order:2}
}
