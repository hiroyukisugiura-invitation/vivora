/* ===== Base ===== */
:root{
  --bg:#f7f3f0;
  --ink:#1b1b1b;
  --rail:#ffffff;
  --line:#d4cbc5;
  --shadow: 0 1px 2px rgba(0,0,0,.05), 0 6px 18px rgba(0,0,0,.06);
  --board-w:1280px;
  --board-h:820px;
  --radius:12px;
  --rail-w: 280px;           /* right rail area (tools + layers) */
  --palette-w: 56px;         /* vertical color bar */
  --io-row-h: 40px;
  --tool-btn: 36px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: -apple-system, BlinkMacSystemFont, "Inter", "Hiragino Sans", "Noto Sans JP", sans-serif;
  background:var(--bg);
  color:var(--ink);
  overflow:hidden;
}

/* ===== Header ===== */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 24px;
}
.topbar .title{font-weight:600; font-size:20px;}
.topbar .next-step .next{font-size:14px; text-decoration:none; color:#666}
.topbar .next-step .next:hover{text-decoration:underline}

/* ===== Fit area (auto scale) ===== */
.fit{
  width:100vw; height:calc(100vh - 56px);
  display:grid; place-items:center;
}
.board{
  width: min(var(--board-w), 96vw);
  aspect-ratio: var(--board-w) / var(--board-h);
  height: auto;
  background:#fff;
  border:2px solid var(--line);
  border-radius:16px;
  box-shadow: var(--shadow);
  position:relative;
  overflow:hidden;
  padding-right: calc(var(--rail-w) + var(--palette-w));
}

/* ===== Canvas Area ===== */
.canvas-area{
  position:absolute; inset:0;
  padding:24px;
  padding-right: calc(var(--rail-w) + var(--palette-w) + 24px);
}
.paper{
  position:relative;
  width:100%; height:100%;
  background: #fff;
  border:2px solid var(--line);
  border-radius:12px;
}
#mannequin{
  position:absolute; left:50%; top:50%;
  width:240px; height:auto;
  transform: translate(-50%,-50%) scale(1);
  transform-origin:center;
  transition: transform .1s linear;
  pointer-events:none;
  user-select:none;
}
.hud{
  position:absolute; right:24px; top:50%;
  transform:translateY(-50%);
  background:#ffffffea;
  border:1px solid var(--line);
  border-radius:10px;
  padding:10px 12px;
  box-shadow: var(--shadow);
  width:140px;
  backdrop-filter:saturate(140%) blur(4px);
}
.hud-row{display:flex; align-items:center; gap:8px; margin:6px 0;}
.hud-label{font-size:12px; color:#333; width:48px; text-align:right;}
.hud input[type="range"]{width:100%}

/* ===== Right Rail ===== */
.right-rail{
  position:absolute; top:0; right:0; bottom:0;
  width: calc(var(--rail-w) + var(--palette-w));
  display:flex; gap:8px; align-items:stretch; justify-content:flex-end;
  padding:16px;
}

/* IO row (download/upload/save) */
.io-row{
  position:absolute;
  top:18px; right: calc(var(--palette-w) + 24px);
  display:flex; gap:12px;
}
.io-btn{
  width:32px; height:32px; border:none; background:#fff; border-radius:8px;
  display:grid; place-items:center; box-shadow: var(--shadow); cursor:pointer;
}
.io-btn img{max-width:20px; height:auto; display:block}

/* Two columns (layers + tools) */
.two-cols{
  position:absolute;
  top:64px; bottom:16px;
  right: calc(var(--palette-w) + 16px);
  width: var(--rail-w);
  display:grid;
  grid-template-columns: 1fr auto;
  gap:16px;
}

/* Layers column */
.layers-col{
  display:grid;
  grid-template-rows: repeat(5, 1fr);
  gap:12px;
}
.layer-card{
  border:1px solid var(--line); border-radius:10px; background:#fff; display:grid;
  grid-template-rows: 28px 1fr 28px;
  box-shadow: var(--shadow);
  overflow:hidden;
}
.layer-head, .layer-foot{
  display:flex; align-items:center; gap:8px; padding:4px 6px; justify-content:flex-start;
}
.layer-head img, .layer-foot img{height:18px; width:auto; display:block}
.layer-body{background:#faf9f7}

/* Tools column */
.tools-col{
  display:flex; flex-direction:column; gap:8px;
}
.tool{
  width:36px; height:36px; border:1px solid var(--line); background:#fff; border-radius:8px;
  display:grid; place-items:center; cursor:pointer; box-shadow: var(--shadow);
}
.tool img{max-width:18px; height:auto; display:block}

/* Color palette vertical rail */
.palette-rail{
  position:absolute; top:64px; bottom:16px; right:16px; width: var(--palette-w);
  border:1px solid var(--line); border-radius:12px; background:#fff; box-shadow: var(--shadow);
  display:flex; flex-direction:column; align-items:center; padding:8px; gap:8px;
}
.swatch{
  width:28px; height:28px; border-radius:999px; border:1px solid #ddd; cursor:pointer;
  background: var(--sw, #ccc);
}
.swatch[data-color]{ background: attr(data-color color, #888); } /* fallback for older */
.swatch.active{ outline:3px solid #4a90e2; outline-offset:2px;}

/* Responsive guard */
@media (max-width: 1200px){
  :root{ --board-w: 1100px; --board-h: 760px; }
}
