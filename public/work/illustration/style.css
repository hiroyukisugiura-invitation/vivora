/* 固定ボード：1280×820（100×70 グリッド）。スクロールは許可、拡大縮小なし。 */
:root{
  --board-w: 1280px;
  --board-h: 820px;
  --cell-w: calc(1280px / 100); /* 12.8px */
  --cell-h: calc(820px / 70);   /* ≈11.7142857px */
  --bg: #0f0f12;
  --panel: #16171b;
  --line: #2a2c33;
  --accent: #e2e4ea;
  --accent-2: #8aa8ff;
}

*{ box-sizing: border-box; }
html,body{ height:100%; background:#0b0b0d; color:#e7e7ea; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans JP", sans-serif; }
body{ margin:0; display:flex; align-items:center; justify-content:center; }

.board{
  position: relative;
  width: var(--board-w);
  height: var(--board-h);
  background: var(--bg);
  border: 1px solid #14151a;
  box-shadow: 0 0 0 1px #0a0b0d, 0 10px 30px rgba(0,0,0,.45);
  overflow: hidden;
}

/* グリッドトグル */
.grid-toggle{ position:absolute; left:8px; top:8px; z-index:50; width:16px; height:16px; opacity:.75; }
.grid-label{ position:absolute; left:32px; top:6px; font-size:12px; color:#9aa0aa; user-select:none; }

/* ガイド */
.grid-guide{
  position:absolute; left:0; top:0; pointer-events:none; opacity:0; transition:opacity .2s ease;
}
.grid-guide.show{ opacity:.9; }
.gline{
  position:absolute; background: linear-gradient(transparent 50%, rgba(255,255,255,.06) 50%);
}
.gline.v{ top:0; width:1px; height:var(--board-h); background:rgba(255,255,255,.06); }
.gline.h{ left:0; height:1px; width:var(--board-w); background:rgba(255,255,255,.06); }

/* 汎用絶対配置ボックス（data-x,y,w,hをJSでpx化） */
.abs{ position:absolute; }
.box{
  background: transparent;
}

/* タイトル */
.title{
  display:flex; align-items:center;
  padding:0 10px;
}
.ttl{
  font-size:20px; letter-spacing:.2px; margin:0;
  color:#f3f5fa; font-weight:700;
}

/* コンテンツボタン */
.contents-buttons{
  display:flex; align-items:center; justify-content:flex-end; gap:6px;
}
.cbtn{
  height: calc(var(--cell-h) * 1);
  padding: 0 10px;
  background: #1c1e24;
  border: 1px solid #2d3038;
  color:#d8dbe4; font-size:12px; border-radius:6px; cursor:pointer;
  line-height: calc(var(--cell-h) * 1 - 2px);
}
.cbtn:hover{ border-color:#3a3e49; }
.cbtn.next{
  background:#20253a; border-color:#2e3553; color:#c9d6ff; font-weight:600;
}

/* I/O 縦スタック */
.io-vertical{
  display:flex; flex-direction:column; align-items:center; gap:8px; padding:4px 0;
  background:#121319; border-left:1px solid #232630; border-right:1px solid #232630;
}
.iobtn{
  width: calc(var(--cell-w) * 1 - 6px);
  height: calc(var(--cell-w) * 1 - 6px);
  padding:0; border:1px solid #2b2e37; background:#171920; border-radius:6px; cursor:pointer;
  display:grid; place-items:center;
}
.iobtn img{ width:70%; height:70%; object-fit:contain; image-rendering:auto; }
.iobtn:hover{ border-color:#3a3f4c; }
.io-vertical .spacer{ flex:1; }

/* キャンバス */
.canvas{
  background: #101115;
  border: 1px solid #1c1f27;
  box-shadow: inset 0 0 0 1px #0c0d11;
  position:absolute;
}
.mannequin{
  position:absolute; object-fit:contain; image-rendering:auto;
}

/* ステーショナリーツール（レイヤー系は含めない） */
.tools{
  display:grid;
  grid-template-columns: 1fr;
  grid-auto-rows: calc(var(--cell-w) * 1.15);
  gap: 8px;
  padding: 8px 6px;
  background:#12131a; border-left:1px solid #232630; border-right:1px solid #232630;
}
.tool{
  width: 100%;
  height: 100%;
  border:1px solid #2a2e37; background:#171a22; border-radius:10px; cursor:pointer;
  display:grid; place-items:center;
}
.tool img{ width:70%; height:70%; object-fit:contain; }
.tool:hover{ border-color:#3a3f4c; }
.tool.active{ outline:2px solid var(--accent-2); outline-offset:-2px; }

/* カラーパレット */
.palette{
  display:grid;
  grid-template-columns: 1fr;
  grid-auto-rows: 24px;
  gap:8px;
  padding:8px 6px;
  background:#12131a; border-left:1px solid #232630; border-right:1px solid #232630;
}
.swatch{
  width:100%; height:24px; border-radius:6px; border:1px solid #2b2f38; background:var(--c);
}

/* 透明度オーバーレイ（選択時のみ表示） */
.opacity-overlay{
  position:absolute; background:rgba(10,12,18,.85);
  border:1px solid #2a2f3b; border-radius:10px;
  display:flex; align-items:center; padding:10px; gap:10px;
}
.opacity-overlay::before{
  content:"Opacity"; font-size:12px; color:#aab1bd; margin-right:6px;
}
.opacity-overlay.hidden{ display:none; }
.opacity-overlay input[type="range"]{
  width: 260px;
}

/* 画像のアンチエイリアス */
img{ -webkit-user-drag: none; user-select:none; }