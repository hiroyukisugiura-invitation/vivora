:root{
  --board-w: 1280px;
  --board-h: 820px;
  --grid: 12px;        /* ＝ 1マス */
  --panel-w-layer: 160px;
  --panel-w-tool: 44px;

  /* 右パネルの基準位置（微調整はここだけでOK） */
  --rp-top: 120px;
  --rp-right: 28px;
}

/* 画面フィット（固定ボードを自動スケール） */
body { margin:0; background:#e3d8c9; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; color:#222; }
.fit { display:grid; place-items:start center; min-height:100vh; overflow:hidden; }
.board{
  position:relative;
  width:var(--board-w);
  height:var(--board-h);
  background:#f7f3ee;
  border-radius:12px;
  box-shadow:0 1px 0 rgba(0,0,0,.2) inset;
  transform-origin: top center;
  --sx: calc(100vw / var(--board-w));
  --sy: calc(100vh / var(--board-h));
  --s : min(var(--sx), var(--sy));
  transform: scale(calc(var(--s) * 0.90));
}

/* ヘッダー */
.topbar{ position:relative; display:flex; align-items:center; gap:calc(var(--grid) * 2); padding:18px 22px; }
.app-title{ font-size:18px; font-weight:600; margin:0; }
.contents-buttons{ display:flex; gap:10px; align-items:center; }
.contents-buttons img{ height:22px; }

.next-step-btn{
  position:absolute; top:18px; right:22px;
  background:#fff; border:1px solid #d7d2c9; border-radius:8px;
  padding:8px 12px; font-size:12px; cursor:pointer;
}

/* メイン（キャンバス） */
.main{ position:relative; padding:0 22px; }
.stage{
  position:relative;
  height: 652px; /* = 820 - header(約) */
  border:2px solid #cfc6bb; border-radius:12px;
  background:#fff;
  margin-right: 320px; /* 右パネルぶんの余白 */
}
.mannequin{
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  width:240px; height:auto; user-select:none; pointer-events:none;
}
.opacity-ui{
  position:absolute; right:120px; top:50%;
  transform:translateY(-50%);
  background:#444; color:#fff; border-radius:6px; padding:4px 8px; font-size:11px; opacity:.85;
}

/* 右パネル：ボード内側の右に固定 */
.rightpanel{
  position:absolute;
  top:var(--rp-top);
  right:var(--rp-right);
  display:grid;
  grid-template-rows: auto auto auto;  /* row1 / row2 / row3 */
  row-gap: var(--grid);
  z-index:3;
}

/* 上段：IO（右寄せ） */
.quick-io{ display:flex; gap:10px; justify-content:flex-end; align-items:center; }
.quick-io img{ width:18px; height:18px; }

/* 中段：左=Layers / 右=Stationery（1マスだけ離す） */
.row2{
  display:grid;
  grid-template-columns: var(--panel-w-layer) var(--panel-w-tool);
  column-gap: var(--grid); /* ← 1マス */
  align-items:start;
}

/* Layers（白枠は撤去） */
.layer-column{
  display:grid;
  grid-auto-rows: 132px;   /* 各カードの高さ */
  row-gap: 14px;
  width: var(--panel-w-layer);
}
.layer-card{
  position:relative;
  width:100%; height:100%;
  /* 白枠・背景を削除して透明に */
  border:none; background:transparent; box-shadow:none;
}
.layer-head, .layer-foot{
  position:absolute; left:6px; right:6px; display:flex; gap:6px; align-items:center; justify-content:flex-end;
}
.layer-head{ top:6px; }
.layer-foot{ bottom:6px; }
.layer-head img, .layer-foot img{ width:14px; height:14px; filter: drop-shadow(0 0 0 rgba(0,0,0,0.15)); }

/* Stationery（縦並び） */
.tool-column{
  display:grid;
  grid-auto-rows: 32px;
  row-gap: 12px;
  width: var(--panel-w-tool);
  justify-items:center;
}
.tool{ all:unset; width:32px; height:32px; display:grid; place-items:center; cursor:pointer; }
.tool img{ width:22px; height:22px; }

/* 下段：Color（ツール列の“1マス下”から開始） */
.row3{ margin-top: var(--grid); }
.color-column{
  display:grid;
  grid-auto-rows: 26px;
  row-gap: 10px;
  width: var(--panel-w-tool);
  justify-items:center;
}
.color-dot{
  width:24px; height:24px; border-radius:999px; background:var(--c, #ddd); border:none; cursor:pointer;
}

/* 画像のドラッグ選択などを無効化 */
img{ user-select:none; -webkit-user-drag:none; }
