/* ===== 固定レイアウト ===== */
:root{
  --bg:#efe8e0; --text:#2b2b2b; --panel:#fff; --line:#d8d1c9;
  --r-lg:16px; --r:12px; --r-sm:8px;
  --icon:28px;              /* アイコン正方サイズ */
  --cell:26px;              /* 方眼1マス（5.08mm） */
}

html,body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:"Helvetica Neue", Arial, sans-serif;
  width:1280px; overflow-x:hidden;       /* 非レスポンシブ固定 */
}
.page{ padding:12px 16px; }

/* ===== ヘッダー ===== */
.hdr{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center;
  column-gap:14px; padding:4px 0 6px;
}
.hdr-left{ display:flex; align-items:center; gap:12px; }
.next{ text-decoration:none; color:inherit; font-size:12px;
  padding:6px 10px; background:var(--panel); border:1px solid var(--line); border-radius:var(--r-sm); }
.contents{ position:relative; height:var(--icon); }
.contents .snap{ position:absolute; width:var(--icon); height:var(--icon); }
.title{ margin:0; text-align:center; font-size:18px; font-weight:600; }
.hdr-right{ display:flex; align-items:center; gap:12px; justify-self:end; }
.history{ position:relative; height:var(--icon); }
.history .snap{ position:absolute; width:var(--icon); height:var(--icon); }

/* ===== Canvas ===== */
.stage{ margin-top:8px; }
.canvas{
  position:relative;
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:var(--r-lg);
  height:610px; /* 画像と同じ縦バランスに固定 */
}
.mannequin{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  height:560px; width:auto;
}

/* Stationery（右上横一列） */
.stationery{ position:absolute; top:10px; right:14px; }
.stationery .snap{ position:absolute; width:var(--icon); height:var(--icon); }

/* 方眼紙（初期OFF） */
.grid-overlay{
  position:absolute; inset:10px 12px 12px 12px; display:none; pointer-events:none;
  background-image:
    linear-gradient(to right, #d0ccc6 1px, transparent 1px),
    linear-gradient(to bottom, #d0ccc6 1px, transparent 1px);
  background-size: var(--cell) var(--cell);
  border-radius: calc(var(--r-lg) - 4px);
}
.grid-overlay.show{ display:block; }

/* 透明度パネル */
.op-panel{
  position:absolute; top:calc(10px + var(--icon) + 8px); right:14px;
  display:none; width:200px; background:#ececec; border:1px solid #bbb; border-radius:10px; padding:8px 10px;
}
.op-panel.show{ display:block; }
.op-val{ text-align:center; font-size:12px; margin-bottom:6px; }
#op-range{ width:100%; }

/* ====== 1マス=26pxのスナップ配置（left/topをマス指定） ====== */
.snap{ left: calc(var(--cell) * var(--x)); top: calc(var(--cell) * var(--y)); }
