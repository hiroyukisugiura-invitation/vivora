/* ====== NAMESPACE: only inside #vfi-root ====== */
#vfi-root, #vfi-root * { box-sizing: border-box; }

#vfi-root {
  --bg: #efe7e0;
  --panel: #ffffff;
  --tile: #ece7e1;
  --line: #e6e0db;
  --text: #333;

  --radius: 12px;
  --radius-lg: 20px;
  --chip: 10px;

  --icon: 26px;
  --gap: 16px;

  --right-col: 360px;
  --canvas-pad: 26px;

  --cassette-col: 220px;   /* 左レール幅 */
  --cassette-h: 180px;     /* 1段の高さ */
  --cassette-pad: 14px;
  --cassette-rail-w: 48px;
  --cassette-bg: #c7c2bb;
  --cassette-track: #eee7df;

  --shadow: 0 6px 18px rgba(0,0,0,.06);
  color: var(--text);
  background: #fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

/* ====== Topbar ====== */
#vfi-root .vfi-topbar {
  padding: 14px 16px;
  background: var(--bg);
  border-bottom: 1px solid var(--line);
}
#vfi-root .vfi-row {
  display: flex; align-items: center; gap: 12px;
}
#vfi-root .vfi-row + .vfi-row { margin-top: 10px; }
#vfi-root .vfi-title { font-size: 16px; font-weight: 600; }
#vfi-root .vfi-flex { flex: 1; }
#vfi-root .vfi-chip {
  padding: 6px 14px; border: 1px solid var(--line);
  background: var(--tile); border-radius: var(--chip);
}
#vfi-root .vfi-btn {
  padding: 8px 14px; border: 1px solid var(--line);
  background: var(--panel); border-radius: var(--radius);
}
#vfi-root .vfi-segment { display: flex; gap: 8px; }
#vfi-root .vfi-segment button {
  padding: 6px 12px; border: 1px solid var(--line);
  background: #fff; border-radius: 8px;
}
#vfi-root .vfi-segment .is-active { box-shadow: inset 0 0 0 2px #00000014; }
#vfi-root .vfi-tiles { display: flex; gap: 8px; }
#vfi-root .vfi-tile {
  width: var(--icon); height: var(--icon);
  border: 1px solid var(--line); border-radius: 10px;
  background: var(--tile);
}

/* ====== Main Layout ====== */
#vfi-root .vfi-main {
  display: grid; grid-template-columns: 1fr var(--right-col);
  gap: 22px; padding: 18px 16px; background: var(--bg);
  min-height: calc(100vh - 78px);
}

/* Left Canvas */
#vfi-root .vfi-canvas { display:flex; }
#vfi-root .vfi-canvas-box {
  flex:1; background: var(--panel); border:1px solid var(--line);
  border-radius: var(--radius); padding: var(--canvas-pad);
  display:flex; align-items:center; justify-content:center;
}
#vfi-root .vfi-mannequin { max-width: 420px; height: auto; display: block; }

/* Right Column */
#vfi-root .vfi-right { display: flex; flex-direction: column; gap: var(--gap); }
#vfi-root .vfi-contents { display:flex; justify-content:flex-end; }

/* Right Grid: left rail + right panels */
#vfi-root .vfi-rightgrid {
  display:grid; grid-template-columns: var(--cassette-col) 1fr;
  gap: var(--gap); align-items: start;
}

/* Left: Cassette column (5 rows) */
#vfi-root .vfi-rail { display:flex; flex-direction:column; gap: var(--gap); }
#vfi-root .vfi-cassette {
  position: relative; height: var(--cassette-h);
  background: var(--cassette-bg);
  border-radius: 24px;
}
#vfi-root .vfi-cassette__preview {
  position:absolute; top: var(--cassette-pad); bottom: var(--cassette-pad);
  left: var(--cassette-pad);
  right: calc(var(--cassette-rail-w) + var(--cassette-pad)*1.2);
  background:#fff; border:1px solid var(--line); border-radius: 18px;
}
#vfi-root .vfi-cassette__rail {
  position:absolute; top: var(--cassette-pad); right: var(--cassette-pad); bottom: var(--cassette-pad);
  width: var(--cassette-rail-w); background: var(--cassette-track);
  border:1px solid var(--line); border-radius: 22px;
}

/* Right: Panels (cards) */
#vfi-root .vfi-panels { display:flex; flex-direction:column; gap: var(--gap); }
#vfi-root .vfi-panel {
  background:#fff; border:1px solid var(--line);
  border-radius: var(--radius); padding: 14px 16px;
  box-shadow: var(--shadow);
}
#vfi-root .vfi-panel h3 { font-size: 18px; font-weight: 700; margin: 0; }

/* ====== Responsive ====== */
@media (max-width: 1024px) {
  #vfi-root .vfi-main { grid-template-columns: 1fr; }
  #vfi-root .vfi-contents { justify-content: flex-start; }
  #vfi-root .vfi-rightgrid { grid-template-columns: 1fr; }
}
