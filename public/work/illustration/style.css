:root{
  --bg:   #efe7e0;
  --panel:#ffffff;
  --tile: #ece7e1;
  --line: #e6e0db;
  --text: #2d2a26;

  --board-w: 1440px;
  --board-h: 900px;
  --topbar-h: 72px;

  --tile-size: 44px;
  --tile-radius: 12px;
  --gap: 12px;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  overflow:hidden;
}
#app-root{ height:100%; display:flex; flex-direction:column }

/* Topbar */
.topbar{
  height:var(--topbar-h);
  display:grid;
  grid-template-columns: 1fr max-content 1fr;
  align-items:center;
  gap:16px;
  padding:0 20px;
  border-bottom:1px solid var(--line);
  background:#f6f1ec;
}
.topbar__left, .topbar__right{ display:flex; align-items:center; gap:14px }
.topbar__center{ display:flex; justify-content:center }
.app-title{ font-size:18px; font-weight:600; margin:0; letter-spacing:0.2px; opacity:.9 }

.ghost-btn{
  height:36px; padding:0 14px;
  border:1px solid var(--line); background:#fff; border-radius:10px; cursor:pointer;
}
.ghost-btn:hover{ background:#fffdfb }

.contents-button{ display:flex; gap:8px }
.contents-button img{ width:28px; height:28px }

.history-tool{ display:flex; gap:10px }
.history-tool .tile{
  width:var(--tile-size); height:var(--tile-size);
  border-radius:var(--tile-radius);
  border:1px solid var(--line); background:#fff;
  display:grid; place-items:center; cursor:pointer;
}
.history-tool .tile img{ width:24px; height:24px }

/* Work */
.work{ position:relative; flex:1; min-height:0; }
#board-wrapper{ position:absolute; inset:0; }
#board{
  position:absolute; left:50%; top:50%;
  width:var(--board-w); height:var(--board-h);
  transform:translate(-50%, -50%);
  transform-origin:0 0;
  background:#faf7f3; border:1px solid var(--line); border-radius:14px;
  box-shadow: 0 10px 30px rgba(0,0,0,.06);
  overflow:hidden;
}

#canvas{
  position:absolute; inset:60px 60px;
  background:#fff; border:1px solid var(--line); border-radius:12px;
}

/* Stationery */
.stationery{
  position:absolute; left:16px; top:16px;
  display:flex; gap:10px; z-index:5;
}
.st-btn{
  width:var(--tile-size); height:var(--tile-size);
  border-radius:var(--tile-radius);
  border:1px solid var(--line); background:var(--tile);
  display:grid; place-items:center; cursor:pointer;
}
.st-btn img{ width:24px; height:24px; pointer-events:none }

/* Penパネル */
.pen-panel{
  position:absolute; left:0; top:calc(100% + 10px);
  width:240px; padding:10px; border-radius:12px;
  background:#fff; border:1px solid var(--line);
  box-shadow:0 8px 24px rgba(0,0,0,.08);
  opacity:0; transform:translateY(-6px);
  pointer-events:none; transition:opacity .18s, transform .18s;
}
.pen-panel.open{ opacity:1; transform:translateY(0); pointer-events:auto }
.pen-panel .row{ display:flex; align-items:center; gap:10px; padding:6px 2px }
.pen-panel label{ min-width:42px; font-size:12px; color:#666 }
.pen-panel input[type="range"]{ flex:1 }

/* Stage */
.stage{ position:absolute; inset:0; display:grid; place-items:center; touch-action:none; }
.mannequin{
  max-width:52%; max-height:85%;
  object-fit:contain; user-select:none; -webkit-user-drag:none;
}

/* Grid */
.grid{
  position:absolute; inset:0;
  background-image:
    linear-gradient(#0000 31px, rgba(0,0,0,.08) 32px, #0000 33px),
    linear-gradient(90deg, #0000 31px, rgba(0,0,0,.08) 32px, #0000 33px);
  background-size:32px 32px, 32px 32px;
  opacity:0; pointer-events:none; transition:opacity .12s;
}
.grid.show{ opacity:1 }

/* その他 */
button{ font:inherit }
button:active{ transform:translateY(1px) }
