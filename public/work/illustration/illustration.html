<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vivora Fashion Illustration 2025</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-wrapper">
    <!-- ヘッダー -->
    <header class="header">
      <div class="header-left">
        <a class="next-button" href="#">Next Step ▸▸</a>
        <div class="contents-buttons">
          <img src="/create_parts/contents_button/0_home.png" alt="Home">
          <img src="/create_parts/contents_button/1_fashion-illustrations.png" alt="Fi">
          <img src="/create_parts/contents_button/2_fabric-matching.png" alt="Fm">
          <img src="/create_parts/contents_button/3_clothing-design.png" alt="Cd">
          <img src="/create_parts/contents_button/4_pattern-creation.png" alt="Pc">
          <img src="/create_parts/contents_button/5_grading.png" alt="Gd">
          <img src="/create_parts/contents_button/6_print-layout-cut.png" alt="Plc">
          <img src="/create_parts/contents_button/digital-dressing-kids-mode.png" alt="Dk">
        </div>
      </div>
      <h1 class="page-title">Vivora Fashion Illustration 2025</h1>
      <div class="header-right">
        <div class="history-tool">
          <img src="/create_parts/create_button/retreat.png" alt="Undo">
          <img src="/create_parts/create_button/forward.png" alt="Redo">
          <img src="/create_parts/create_button/reset.png" alt="Reset">
          <img src="/create_parts/create_button/download.png" alt="Download">
          <img src="/create_parts/create_button/upload.png" alt="Upload">
          <img src="/create_parts/create_button/save.png" alt="Save">
        </div>
        <div class="stationery-tool">
          <div class="tool-dropdown select">
            <img src="/tools/select.png" alt="Select">
            <div class="dropdown">
              <img src="/tools/direct_select.png" alt="Direct Select">
            </div>
          </div>
          <div class="tool-dropdown shape">
            <img src="/tools/square.png" alt="Square">
            <div class="dropdown">
              <img src="/tools/circle.png" alt="Circle">
            </div>
          </div>
          <div class="tool-dropdown brush">
            <img src="/tools/brush.png" alt="Brush">
            <div class="dropdown">
              <img src="/tools/pen.png" alt="Pen">
              <img src="/tools/circlebrush.png" alt="Circle Brush">
              <img src="/tools/ballpointpen.png" alt="Ballpoint">
              <img src="/tools/markerpen.png" alt="Marker">
            </div>
          </div>
          <img src="/tools/eraser.png" alt="Eraser">
          <img src="/tools/text.png" alt="Text">
          <div class="tool-opacity">
            <img src="/tools/opacity_icon.png" alt="Opacity" id="opacity-toggle">
            <div class="opacity-slider" id="opacity-slider">
              <input type="range" min="0" max="100" value="100" id="opacity-range">
              <span id="opacity-value">100%</span>
            </div>
          </div>
          <img src="/tools/grid.png" alt="Grid Toggle">
          <div class="layer-dropdown">
            <img src="/tools/layer.png" alt="Layer" id="layer-toggle">
            <div class="layer-panel" id="layer-panel">
              <div class="layer">
                <div class="layer-header">
                  <img src="/tools/layerlock.png" alt="Lock">
                  <img src="/tools/layerdisplay.png" alt="Display">
                  <img src="/tools/layerhidden.png" alt="Hidden">
                </div>
                <div class="layer-card"></div>
                <div class="layer-footer">
                  <img src="/tools/layerpanelplus.png" alt="Add">
                  <img src="/tools/layerreproduction.png" alt="Copy">
                  <img src="/tools/layerlayer_integration.png" alt="Merge">
                  <img src="/tools/layerdestruction.png" alt="Delete">
                </div>
              </div>
              <!-- 他レイヤーはJSで複製可 -->
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- キャンバス -->
    <main class="canvas-wrapper">
      <div id="canvas">
        <img id="mannequin" src="/mannequin/mannequin_woman/mannequin_woman_front.png" alt="mannequin">
      </div>
    </main>
  </div>

  <script>
    const opacityToggle = document.getElementById('opacity-toggle');
    const opacitySlider = document.getElementById('opacity-slider');
    const opacityRange = document.getElementById('opacity-range');
    const opacityValue = document.getElementById('opacity-value');

    opacityToggle.addEventListener('click', () => {
      opacitySlider.style.display = opacitySlider.style.display === 'block' ? 'none' : 'block';
    });

    opacityRange.addEventListener('input', () => {
      opacityValue.textContent = opacityRange.value + '%';
      document.getElementById('mannequin').style.opacity = opacityRange.value / 100;
    });

    const layerToggle = document.getElementById('layer-toggle');
    const layerPanel = document.getElementById('layer-panel');
    layerToggle.addEventListener('click', () => {
      layerPanel.style.display = layerPanel.style.display === 'block' ? 'none' : 'block';
    });

    // pinch zoom for mannequin (for mobile only)
    let scale = 1;
    let startDist = 0;
    const mannequin = document.getElementById('mannequin');
    mannequin.addEventListener('touchstart', (e) => {
      if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        startDist = Math.hypot(dx, dy);
      }
    });
    mannequin.addEventListener('touchmove', (e) => {
      if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        const newDist = Math.hypot(dx, dy);
        const scaleFactor = newDist / startDist;
        mannequin.style.transform = `scale(${scale * scaleFactor})`;
      }
    });
    mannequin.addEventListener('touchend', () => {
      scale = parseFloat(mannequin.style.transform.replace(/[^\d.]/g, '')) || 1;
    });
  </script>
</body>
</html>
